(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{52:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),l=a(105),o=a(106),m=a(35),s=a(94),u=a(18),d=a.n(u),f=a(28),p=a(23),E=a(13),g=a.n(E),h=a(107),y=a(108),v=a(92),w=a(93);function b(e){var t=e.classes,a=e.info,n=a.date,c=a.weather,i=Math.round(Math.max.apply(Math,c.map((function(e){return e.main.temp_max})))-273.15),l=Math.floor(Math.min.apply(Math,c.map((function(e){return e.main.temp_min})))-273.15),o=function(e){if(0===e.length)return null;for(var t={},a=e[0],n=1,r=0;r<e.length;r++){var c=e[r];null==t[c]?t[c]=1:t[c]++,t[c]>n&&(a=c,n=t[c])}return a}(c.map((function(e){return e.weather[0].icon})));return r.a.createElement(y.a,{style:{padding:"0"},onClick:function(){return e.selectFunc(e.id)},selected:e.selected===e.id},r.a.createElement(h.a,{className:t.weatherCard},r.a.createElement(v.a,{classes:{title:t.grayText},title:g()(n).format("ddd"),titleTypographyProps:{variant:"body2"},style:{textAlign:"center"}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("img",{alt:"404",className:t.weatherIcon,src:"http://openweathermap.org/img/wn/".concat(o.slice(0,2),"d@2x.png")})),r.a.createElement(w.a,null,r.a.createElement(s.a,{container:!0,spacing:2,justify:"center"},r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"body2"},i,"\xb0")),r.a.createElement(s.a,{item:!0,className:t.grayText},r.a.createElement(m.a,{variant:"body2"},l,"\xb0"))))))}var j=a(99),x=a(95),C=a(97),M=a(96),O=a(98),S=a(100),k=a(110),D=a(101);function _(e){var t=e.info.weather.map((function(e){return{timeOfDay:parseInt(e.dt_txt.slice(11,13)),temp:Math.round(e.main.feels_like-273.15)}})),a=30,n=0,c=560-n-0,i=80-a-0,l=new Date,o=new Date(l);o.setDate(o.getDate()+1);var m=function(e){return e.timeOfDay<9?new Date(o.setHours(e.timeOfDay)):new Date(l.setHours(e.timeOfDay))},s=function(e){return e.temp-(Math.min.apply(null,t.map((function(e){return e.temp})))-2)},u=Object(x.a)({range:[0,c],domain:Object(M.a)(t,m)}),d=Object(C.a)({range:[i,0],domain:[0,Object(O.a)(t,s)]}),f=r.a.createElement("svg",{width:560,height:80},r.a.createElement(j.a,{top:a,left:n,justify:"flex-end"},r.a.createElement(S.a,{data:t,x:function(e){return u(m(e))},y:function(e){return d(s(e))},strokeWidth:4,stroke:"#EC6E4C",strokeLinecap:"round",fill:"transparent",curve:D.a}),r.a.createElement(k.a,{data:t,yScale:d,x:function(e){return u(m(e))},y:function(e){return d(s(e))},strokeWidth:0,fill:"#EAA18F",curve:D.a})));return r.a.createElement("div",null,f)}function A(e){var t,a,n={day:"???",time:"???"},c=e.classes,i="???",l="???",o="???",u="?",d="",f=["9 AM","12 PM","3 PM","6 PM","9 PM","12 AM","3 AM"];if("undefined"!=typeof e.info)for(n.day=g()(e.info.date).format("dddd"),n.time=3*Math.floor(g()(e.info.date).format("H")/3),t=(n.time%12).toString()+":00 "+(n.time<12?"AM":"PM"),u=Math.round(e.info.weather.map((function(e){return e.main.temp}))[0]-273.15),o=a=e.info.weather.map((function(e){return e.weather[0].main}))[0],a=e.info.weather.map((function(e){return e.weather[0].icon}))[0],i=e.info.weather.map((function(e){return e.main.humidity}))[0],l=e.info.weather.map((function(e){return e.wind.speed}))[0],d=r.a.createElement(_,{info:e.info});f[0]!==(n.time%12).toString()+" "+(n.time<12?"AM":"PM")&&((n.time%12).toString()+" "+(n.time<12?"AM":"PM")!=="0 PM"||"12 PM"!==f[0]);)f.unshift(f.pop());else a="none";return f=f.map((function(e,t){return r.a.createElement(s.a,{key:t,xs:!0,item:!0},r.a.createElement(m.a,{key:t,variant:"body2"},e))})),r.a.createElement(s.a,{container:!0,direction:"column",spacing:2},r.a.createElement(s.a,{item:!0,container:!0,direction:"column"},r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"h5"},e.addr)),r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"body2"},n.day," ",t)),r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"body2"},o))),r.a.createElement(s.a,{item:!0,container:!0,direction:"row"},r.a.createElement(s.a,{item:!0,container:!0,justify:"flex-start",direction:"row",spacing:1,xs:6},r.a.createElement(s.a,{item:!0,style:{paddingTop:"8pt"}},r.a.createElement("img",{alt:"?",src:"http://openweathermap.org/img/wn/".concat(a,"@2x.png"),className:c.weatherIconBig})),r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"h3",style:{fontSize:"50pt"}},u)),r.a.createElement(s.a,{item:!0,style:{paddingTop:"11pt"}},r.a.createElement(m.a,null,"\xb0C"))),r.a.createElement(s.a,{item:!0,container:!0,direction:"column",justify:"center",spacing:2,xs:6},r.a.createElement(s.a,{item:!0,container:!0,direction:"column"},r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"body2"},"Humidity: ",i,"%")),r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"body2"},"Wind: ",l," m/s"))))),r.a.createElement(s.a,{container:!0,item:!0,direction:"column",alignItems:"center"},r.a.createElement(s.a,{item:!0},d),r.a.createElement(s.a,{className:c.grayCenterText,container:!0,item:!0,direction:"row"},f)))}function T(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),o=Object(p.a)(l,2),m=o[0],u=o[1],E=Object(n.useState)(0),g=Object(p.a)(E,2),h=g[0],y=g[1],v=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(e.position.name),t.next=3,fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e.position.lat,"&lon=").concat(e.position.lon,"&appid=").concat("49ae87126dedc1be3ea175c02db618bc"));case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,u(n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){v()}),[]);var w=Object(n.useCallback)((function(e){y(e)}),[]),j=new Date,x=[];if(""!==m&&m.list.length>0)for(var C=0;C<5;C++){var M=new Date(j.getTime()+864e5*C);x.push({date:M,weather:m.list.slice(8*C,8*C+7)})}var O=x.map((function(t,a){return r.a.createElement(b,{key:a,id:a,info:t,classes:e.classes,selectFunc:w,selected:h})}));return r.a.createElement(s.a,{container:!0,justify:"space-between",direction:"column",style:{width:"100%",height:"100%"}},r.a.createElement(A,{addr:c,info:x[h],classes:e.classes}),r.a.createElement(s.a,{item:!0,container:!0,direction:"row",justify:"center"},O))}function P(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function I(e){var t=0,a=0;return void 0!==e.value&&(t=P(e.value),a=(e.velocity<0?"":"+")+P(e.velocity)),r.a.createElement(s.a,{item:!0,container:!0,xs:!0,direction:"column"},r.a.createElement(s.a,{item:!0,style:{alignSelf:"center"}},r.a.createElement(m.a,{variant:e.size},e.label)),r.a.createElement(s.a,{item:!0,style:{alignSelf:"center"}},r.a.createElement(m.a,{variant:e.size},t)),r.a.createElement(s.a,{item:!0,style:{alignSelf:"center"}},r.a.createElement(m.a,{variant:e.size,style:{color:e.color}},a)))}function z(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],i=a[1],l=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://www.trackcorona.live/api/cities/".concat(e.area));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,i(n.data[0]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),r.a.createElement(s.a,{container:!0,direction:"column",spacing:3},r.a.createElement(s.a,{item:!0,style:{alignSelf:"center"}},r.a.createElement(m.a,{variant:"h3"},c.location)),r.a.createElement(I,{label:"Total infected",value:c.confirmed,velocity:c.velocity_confirmed,color:"#EC6E4C",size:"h4"}),r.a.createElement(s.a,{item:!0,container:!0,direction:"row"},r.a.createElement(I,{label:"Deaths",value:c.dead,velocity:c.velocity_dead,color:"#EC6E4C",size:"h6"}),r.a.createElement(I,{label:"Current infected",value:c.confirmed-c.dead-c.recovered,velocity:c.velocity_confirmed-c.velocity_dead-c.velocity_recovered,color:c.velocity_confirmed-c.velocity_dead-c.velocity_recovered>0?"#EC6E4C":"#40A90D",size:"h6"}),r.a.createElement(I,{label:"Recoveries",value:c.recovered,velocity:c.velocity_recovered,color:"#40A90D",size:"h6"})),r.a.createElement(s.a,{item:!0,style:{alignSelf:"center"}},r.a.createElement(m.a,{variant:"h6"},"Update from: ",g()(c.updated).format("DD.MM.YYYY"))))}var N=a(102),B=a(103);function W(e){return r.a.createElement(N.a,{className:e.classes.infoCardStyle},r.a.createElement(s.a,{container:!0,direction:"column",spacing:3},r.a.createElement(s.a,{item:!0},r.a.createElement(z,{area:e.location.area})),r.a.createElement(s.a,{item:!0},r.a.createElement(B.a,null)),r.a.createElement(s.a,{item:!0},r.a.createElement(T,{classes:e.classes,position:e.location}))))}var Y=a(104),F=Object(Y.a)((function(e){return{infoCardWrapper:{maxWidth:e.spacing(80),width:"100%",alignSelf:"center"},infoCardStyle:{margin:"auto",padding:e.spacing(2)},forecastStyle:{margin:"auto",width:5*e.spacing(14),padding:e.spacing(2),spacing:e.spacing(2)},weatherCard:{width:e.spacing(14),height:e.spacing(20)},weatherIcon:{height:e.spacing(6),width:e.spacing(6),alignSelf:"center",justify:"center"},weatherIconBig:{height:e.spacing(8),width:e.spacing(8),alignSelf:"center",justify:"center"},grayCenterText:{textAlign:"center",color:"#aaaaaa"},grayText:{color:"#aaaaaa"}}}));function H(){var e=F();console.log(e),console.log(F());var t=[{lat:62.03,lon:129.73,name:"Yakutsk",area:"Yakutia"},{lat:35.1028,lon:129.0403,name:"Busan",area:"Busan"},{lat:35.8,lon:128.55,name:"Daegu",area:"Daegu"}].map((function(t){return r.a.createElement(s.a,{item:!0,className:e.infoCardWrapper},r.a.createElement(W,{location:t,classes:e})," ")}));return r.a.createElement(s.a,{container:!0,direction:"column",spacing:2},t)}function J(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{backgroundColor:"#fafafa"}},r.a.createElement(l.a,{style:{margin:"auto",height:80,backgroundColor:"#EC6E4C",justifyContent:"center",alignItems:"center"}},r.a.createElement(m.a,{variant:"h6"},"COVID statistics")),r.a.createElement(o.a,{style:{marginTop:80,padding:25}},r.a.createElement(H,null))))}a(62);i.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.27d0c255.chunk.js.map